### ä¹ã€è·¯ç”± 

#### 1ã€é™æ€æ–‡ä»¶ 

add_static_files() ä½¿æœ¬åœ°ç›®å½•åœ¨æŒ‡å®šçš„ç«¯ç‚¹ï¼ˆä¾‹å¦‚ '/static'ï¼‰ä¸Šå¯ç”¨ã€‚è¿™å¯¹äºå‘å‰ç«¯æä¾›æœ¬åœ°æ•°æ®ï¼Œå¦‚å›¾åƒï¼Œéå¸¸æœ‰ç”¨ã€‚å¦åˆ™ï¼Œæµè§ˆå™¨å°†æ— æ³•è®¿é—®è¿™äº›æ–‡ä»¶ã€‚åªå°†éå…³é”®å®‰å…¨æ–‡ä»¶æ”¾åœ¨å…¶ä¸­ï¼Œå› ä¸ºå®ƒä»¬å¯¹æ¯ä¸ªäººéƒ½æ˜¯å¯è®¿é—®çš„ã€‚

è¦ä½¿å•ä¸ªæ–‡ä»¶å¯è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨ add_static_file()ã€‚å¯¹äºåº”è¯¥ä»¥æµçš„å½¢å¼ä¼ è¾“çš„åª’ä½“æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ add_media_files() æˆ– add_media_file()ã€‚"

url_pathï¼š ä»¥æ–œæ â€œ/â€å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œç”¨äºæ ‡è¯†åº”è¯¥æä¾›æ–‡ä»¶çš„è·¯å¾„

local_directoryï¼š åŒ…å«è¦ç”¨ä½œé™æ€å†…å®¹æä¾›çš„æ–‡ä»¶çš„æœ¬åœ°æ–‡ä»¶å¤¹

```python
from nicegui import app, ui

app.add_static_files('/examples', 'examples')
ui.label('Some NiceGUI Examples').classes('text-h5')
ui.link('AI interface', '/examples/ai_interface/main.py')
ui.link('Custom FastAPI app', '/examples/fastapi/main.py')
ui.link('Authentication', '/examples/authentication/main.py')

ui.run()
```

![image-20231017200439296](images/static_file.jpg)

#### 2ã€åª’ä½“æ–‡ä»¶ 

add_media_files() å…è®¸ä»æŒ‡å®šçš„ç«¯ç‚¹ï¼ˆä¾‹å¦‚ '/media'ï¼‰æµå¼ä¼ è¾“æœ¬åœ°æ–‡ä»¶ã€‚è¿™åº”è¯¥ç”¨äºæ”¯æŒæ­£ç¡®æµå¼ä¼ è¾“çš„åª’ä½“æ–‡ä»¶ã€‚å¦åˆ™ï¼Œæµè§ˆå™¨å°†æ— æ³•é€æ¸è®¿é—®å’ŒåŠ è½½æ–‡ä»¶ï¼Œä¹Ÿæ— æ³•è·³è½¬åˆ°æµä¸­çš„ä¸åŒä½ç½®ã€‚åªå°†éå…³é”®å®‰å…¨æ–‡ä»¶æ”¾åœ¨å…¶ä¸­ï¼Œå› ä¸ºå®ƒä»¬å¯¹æ¯ä¸ªäººéƒ½æ˜¯å¯è®¿é—®çš„ã€‚

è¦ä½¿å•ä¸ªæ–‡ä»¶é€šè¿‡æµå¼ä¼ è¾“å¯è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨ add_media_file()ã€‚å¯¹äºå°çš„é™æ€æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ add_static_files() æˆ– add_static_file()ã€‚"

url_pathï¼š ä»¥æ–œæ â€œ/â€å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œç”¨äºæ ‡è¯†åº”è¯¥æä¾›æ–‡ä»¶çš„è·¯å¾„

local_directoryï¼š åŒ…å«è¦ç”¨ä½œåª’ä½“å†…å®¹æä¾›çš„æ–‡ä»¶çš„æœ¬åœ°æ–‡ä»¶å¤¹

```python
import requests
from nicegui import app, ui
from pathlib import Path

media = Path('media')
media.mkdir(exist_ok=True)
r = requests.get('https://cdn.coverr.co/videos/coverr-cloudy-sky-2765/1080p.mp4')
(media  / 'clouds.mp4').write_bytes(r.content)
app.add_media_files('/my_videos', media)
ui.video('/my_videos/clouds.mp4')

ui.run()
```

![image-20231017200705876](images/media_file.jpg)

#### 3ã€API å“åº” 

NiceGUI åŸºäº FastAPIã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨ FastAPI çš„æ‰€æœ‰åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨å›¾å½¢ç”¨æˆ·ç•Œé¢ä¹‹å¤–å®ç° RESTful APIã€‚åªéœ€ä» nicegui å¯¼å…¥ app å¯¹è±¡ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥åœ¨è‡ªå·±çš„ FastAPI åº”ç”¨ç¨‹åºä¹‹ä¸Šè¿è¡Œ NiceGUIï¼Œè€Œä¸æ˜¯ä½¿ç”¨ ui.run() è‡ªåŠ¨å¯åŠ¨æœåŠ¡å™¨ï¼Œä½¿ç”¨ ui.run_with(app)ã€‚

æ‚¨è¿˜å¯ä»¥åœ¨é¡µé¢å‡½æ•°å†…è¿”å›ä»»ä½•å…¶ä»– FastAPI å“åº”å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ»¡è¶³æŸäº›æ¡ä»¶ï¼Œæ‚¨å¯ä»¥è¿”å› RedirectResponse æ¥å°†ç”¨æˆ·é‡å®šå‘åˆ°å¦ä¸€ä¸ªé¡µé¢ã€‚è¿™åœ¨æˆ‘ä»¬çš„èº«ä»½éªŒè¯æ¼”ç¤ºä¸­æœ‰ä½¿ç”¨ã€‚

```python
import random
from nicegui import app, ui

@app.get('/random/{max}')
def generate_random_number(max: int):
    return {'min': 0, 'max': max, 'value': random.randint(0, max)}

max = ui.number('max', value=100)
ui.button('generate random number', on_click=lambda: ui.open(f'/random/{max.value:.0f}'))

ui.run()
```

![image-20231017202221449](images/api.jpg)

### åã€ç”Ÿå‘½å‘¨æœŸ

#### 1ã€äº‹ä»¶ 

æ‚¨å¯ä»¥æ³¨å†Œåç¨‹æˆ–å‡½æ•°æ¥å¤„ç†ä»¥ä¸‹äº‹ä»¶ï¼š

- app.on_startupï¼šåœ¨ NiceGUI å¯åŠ¨æˆ–é‡æ–°å¯åŠ¨æ—¶è°ƒç”¨ 
- app.on_shutdownï¼šåœ¨ NiceGUI å…³é—­æˆ–é‡æ–°å¯åŠ¨æ—¶è°ƒç”¨ 
- app.on_connectï¼šåœ¨æ¯ä¸ªè¿æ¥çš„å®¢æˆ·ç«¯ä¸Šè°ƒç”¨ï¼ˆå¯é€‰å‚æ•°ï¼šnicegui.Clientï¼‰ 
- app.on_disconnectï¼šåœ¨æ¯ä¸ªæ–­å¼€è¿æ¥çš„å®¢æˆ·ç«¯ä¸Šè°ƒç”¨ï¼ˆå¯é€‰å‚æ•°ï¼šnicegui.Clientï¼‰ 
- app.on_exceptionï¼šåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶è°ƒç”¨ï¼ˆå¯é€‰å‚æ•°ï¼šå¼‚å¸¸ï¼‰ 

å½“ NiceGUI å…³é—­æˆ–é‡æ–°å¯åŠ¨æ—¶ï¼Œä»åœ¨æ‰§è¡Œä¸­çš„æ‰€æœ‰ä»»åŠ¡å°†è‡ªåŠ¨å–æ¶ˆã€‚

```python
from datetime import datetime
from nicegui import app, ui

dt = datetime.now()

def handle_connection():
    global dt
    dt = datetime.now()
app.on_connect(handle_connection)

label = ui.label()
ui.timer(1, lambda: label.set_text(f'Last new connection: {dt:%H:%M:%S}'))

ui.run()
```

![image-20231017202457982](images/event.jpg)

#### 2ã€å…³é—­ 

è¿™å°†ä»¥ç¼–ç¨‹æ–¹å¼åœæ­¢æœåŠ¡å™¨ã€‚ä»…åœ¨è‡ªåŠ¨é‡è½½è¢«ç¦ç”¨æ—¶æ‰å¯èƒ½ã€‚

```python
from nicegui import app, ui

ui.button('shutdown', on_click=app.shutdown)

ui.run(reload=False)
```

![image-20231017202700171](images/shutdown.jpg)

#### 3ã€URL 

æ‚¨å¯ä»¥é€šè¿‡ app.urls è®¿é—® NiceGUI åº”ç”¨ç¨‹åºå¯ç”¨çš„æ‰€æœ‰ URL åˆ—è¡¨ã€‚URL åœ¨ app.on_startup ä¸­ä¸å¯ç”¨ï¼Œå› ä¸ºæœåŠ¡å™¨å°šæœªè¿è¡Œã€‚ç›¸åï¼Œæ‚¨å¯ä»¥åœ¨é¡µé¢å‡½æ•°ä¸­è®¿é—®å®ƒä»¬ï¼Œæˆ–è€…ä½¿ç”¨ app.urls.on_change æ³¨å†Œå›è°ƒå‡½æ•°ã€‚

```python
from nicegui import app, ui

@ui.page('/')
def index():
    for url in app.urls:
        ui.link(url, target=url)

ui.run()
```

![image-20231017202840072](images/url.jpg)

### åä¸€ã€NiceGUI åŸºæœ¬æ¦‚å¿µ

#### 1ã€è‡ªåŠ¨ä¸Šä¸‹æ–‡ 

ä¸ºäº†å…è®¸ç¼–å†™ç›´è§‚çš„ UI æè¿°ï¼ŒNiceGUI è‡ªåŠ¨è·Ÿè¸ªå…ƒç´ åˆ›å»ºçš„ä¸Šä¸‹æ–‡ã€‚è¿™æ„å‘³ç€ä¸éœ€è¦æ˜¾å¼çš„ parent å‚æ•°ã€‚è€Œæ˜¯ä½¿ç”¨ with è¯­å¥å®šä¹‰çˆ¶ä¸Šä¸‹æ–‡ã€‚å®ƒè¿˜ä¼ é€’ç»™äº‹ä»¶å¤„ç†ç¨‹åºå’Œè®¡æ—¶å™¨ã€‚

åœ¨æ¼”ç¤ºä¸­ï¼Œå°†æ ‡ç­¾â€œCard contentâ€æ·»åŠ åˆ°å¡ç‰‡ä¸­ã€‚ç”±äº ui.button ä¹Ÿæ·»åŠ åˆ°å¡ç‰‡ä¸­ï¼Œæ ‡ç­¾â€œClick!â€ ä¹Ÿå°†åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºã€‚æ ‡ç­¾â€œTick!â€ï¼Œåœ¨ä¸€ç§’åæ·»åŠ ä¸€æ¬¡ï¼Œä¹Ÿä¼šæ·»åŠ åˆ°å¡ç‰‡ä¸­ã€‚

è¿™ä¸ªè®¾è®¡å†³ç­–ä½¿å¾—å¯ä»¥è½»æ¾åˆ›å»ºæ¨¡å—åŒ–ç»„ä»¶ï¼Œå³ä½¿åœ¨ UI ä¸­ç§»åŠ¨å®ƒä»¬ï¼Œå®ƒä»¬ä»ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†æ ‡ç­¾å’ŒæŒ‰é’®ç§»åˆ°å…¶ä»–åœ°æ–¹ï¼Œå¯èƒ½å°†å®ƒä»¬åŒ…è£…åœ¨å¦ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œä»£ç ä»ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œã€‚

```python
from nicegui import ui

with ui.card():
    ui.label('Card content')
    ui.button('Add label', on_click=lambda: ui.label('Click!'))
    ui.timer(1.0, lambda: ui.label('Tick!'), once=True)

ui.run()
```

![image-20231017203256164](images/context.jpg)

#### 2ã€é€šç”¨äº‹ä»¶ 

å¤§å¤šæ•° UI å…ƒç´ éƒ½å¸¦æœ‰é¢„å®šä¹‰çš„äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œåƒæ¼”ç¤ºä¸­çš„ ui.button â€œAâ€ æœ‰ä¸€ä¸ª on_click å‚æ•°ï¼Œå®ƒæœŸæœ›ä¸€ä¸ªåç¨‹æˆ–å‡½æ•°ã€‚ä½†æ˜¯æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ on æ–¹æ³•æ¥æ³¨å†Œä¸€ä¸ªé€šç”¨äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå°±åƒ â€œBâ€ é‚£æ ·ã€‚è¿™å…è®¸æ‚¨æ³¨å†Œä»»ä½• JavaScript å’Œ Quasar æ”¯æŒçš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚

ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä¸ºåƒ â€œCâ€ é‚£æ ·çš„ mousemove äº‹ä»¶æ³¨å†Œä¸€ä¸ªå¤„ç†ç¨‹åºï¼Œå³ä½¿ ui.button æ²¡æœ‰ on_mousemove å‚æ•°ã€‚æœ‰äº›äº‹ä»¶ï¼Œå¦‚ mousemoveï¼Œä¼šéå¸¸é¢‘ç¹åœ°è§¦å‘ã€‚ä¸ºäº†é¿å…æ€§èƒ½é—®é¢˜ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ throttle å‚æ•°ï¼Œåªæœ‰åœ¨æ¯ throttle ç§’æ—¶æ‰è°ƒç”¨å¤„ç†ç¨‹åºï¼ˆâ€œDâ€ï¼‰ã€‚

é€šç”¨äº‹ä»¶å¤„ç†ç¨‹åºå¯ä»¥æ˜¯åŒæ­¥çš„æˆ–å¼‚æ­¥çš„ï¼Œå¯é€‰åœ°æ¥å— GenericEventArguments ä½œä¸ºå‚æ•°ï¼ˆâ€œEâ€ï¼‰ã€‚æ‚¨è¿˜å¯ä»¥æŒ‡å®šåº”å°† JavaScript æˆ– Quasar äº‹ä»¶çš„å“ªäº›å±æ€§ä¼ é€’ç»™å¤„ç†ç¨‹åºï¼ˆâ€œFâ€ï¼‰ã€‚è¿™å¯ä»¥å‡å°‘éœ€è¦åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼ è¾“çš„æ•°æ®é‡ã€‚

åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°æ›´å¤šå…³äºæ”¯æŒçš„äº‹ä»¶çš„ä¿¡æ¯ï¼š

[HTMLElement - Web APIs | MDN (mozilla.org)](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement#events) ç”¨äº HTML å…ƒç´ 

[Quasar Components | Quasar Framework](https://quasar.dev/components) ç”¨äº Quasar å…ƒç´ ï¼ˆè¯·å‚è§æ¯ä¸ªç»„ä»¶é¡µé¢ä¸Šçš„"äº‹ä»¶"é€‰é¡¹å¡ï¼‰

```python
from nicegui import ui

with ui.row():
    ui.button('A', on_click=lambda: ui.notify('You clicked the button A.'))
    ui.button('B').on('click', lambda: ui.notify('You clicked the button B.'))
with ui.row():
    ui.button('C').on('mousemove', lambda: ui.notify('You moved on button C.'))
    ui.button('D').on('mousemove', lambda: ui.notify('You moved on button D.'), throttle=0.5)
with ui.row():
    ui.button('E').on('mousedown', lambda e: ui.notify(e))
    ui.button('F').on('mousedown', lambda e: ui.notify(e), ['ctrlKey', 'shiftKey'])

ui.run()
```

![image-20231017203850083](images/generic.jpg)

### åäºŒã€é…ç½®

#### 1ã€ui.run

æ‚¨å¯ä»¥è°ƒç”¨ ui.run() å¹¶æä¾›å¯é€‰å‚æ•°ï¼š

```python
from nicegui import ui

ui.label('page with custom title')

ui.run(title='My App')
```

![image-20231017204145269](images/run.jpg)

#### 2ã€æœ¬æœºæ¨¡å¼

æ‚¨å¯ä»¥é€šè¿‡åœ¨ ui.run å‡½æ•°ä¸­æŒ‡å®š native=True æ¥å¯ç”¨ NiceGUI çš„æœ¬æœºæ¨¡å¼ã€‚è¦è‡ªå®šä¹‰åˆå§‹çª—å£å¤§å°å’Œæ˜¾ç¤ºæ¨¡å¼ï¼Œè¯·åˆ†åˆ«ä½¿ç”¨ window_size å’Œ fullscreen å‚æ•°ã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥é€šè¿‡ app.native.window_args å’Œ app.native.start_args æä¾›é¢å¤–çš„å…³é”®å­—å‚æ•°ã€‚é€‰æ‹©ç”±å†…éƒ¨ä½¿ç”¨çš„ pywebview æ¨¡å— [API | pywebview (flowrl.com)](https://pywebview.flowrl.com/guide/api.html) ä¸º webview.create_window å’Œ webview.start å‡½æ•°å®šä¹‰çš„ä»»ä½•å‚æ•°ã€‚è¯·æ³¨æ„ï¼Œè¿™äº›å…³é”®å­—å‚æ•°å°†ä¼˜å…ˆäº ui.run ä¸­å®šä¹‰çš„å‚æ•°ã€‚

åœ¨æœ¬æœºæ¨¡å¼ä¸­ï¼Œapp.native.main_window å¯¹è±¡å…è®¸æ‚¨è®¿é—®åº•å±‚çª—å£ã€‚å®ƒæ˜¯ pywebview ä¸­ Window çš„å¼‚æ­¥ç‰ˆæœ¬ [API | pywebview (flowrl.com)](https://pywebview.flowrl.com/guide/api.html#screen-width) ã€‚

```python
from nicegui import app, ui

app.native.window_args['resizable'] = False
app.native.start_args['debug'] = True

ui.label('app running in native mode')
ui.button('enlarge', on_click=lambda: app.native.main_window.resize(1000, 700))

ui.run(native=True, window_size=(400, 300), fullscreen=False)
```

![image-20231017204449725](images/native.jpg)

å¦‚æœ webview éš¾ä»¥æ‰¾åˆ°æ‰€éœ€çš„åº“ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°ä¸ "WebView2Loader.dll" ç›¸å…³çš„é”™è¯¯ã€‚è¦è§£å†³æ­¤é—®é¢˜ï¼Œè¯·å°è¯•å°† DLL æ–‡ä»¶ç§»åŠ¨åˆ°ä¸Šä¸€çº§ç›®å½•ï¼Œä¾‹å¦‚ï¼š

- ä» .venv/Lib/site-packages/webview/lib/x64/WebView2Loader.dll 
- åˆ° .venv/Lib/site-packages/webview/lib/WebView2Loader.dll

#### 3ã€ç¯å¢ƒå˜é‡

æ‚¨å¯ä»¥è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡æ¥é…ç½® NiceGUIï¼š

- MATPLOTLIBï¼ˆé»˜è®¤å€¼ï¼štrueï¼‰å¯ä»¥è®¾ç½®ä¸º false ä»¥é¿å…å¯¼å…¥ Matplotlibï¼Œä»è€Œä½¿ ui.pyplot å’Œ ui.line_plot ä¸å¯ç”¨ã€‚
- NICEGUI_STORAGE_PATHï¼ˆé»˜è®¤å€¼ï¼šæœ¬åœ° ".nicegui"ï¼‰å¯ä»¥è®¾ç½®ä»¥æ›´æ”¹å­˜å‚¨æ–‡ä»¶çš„ä½ç½®ã€‚
- MARKDOWN_CONTENT_CACHE_SIZEï¼ˆé»˜è®¤å€¼ï¼š1000ï¼‰ï¼šå†…å­˜ä¸­ç¼“å­˜çš„æœ€å¤§ Markdown å†…å®¹ç‰‡æ®µæ•°ã€‚
- NO_NETIFACESï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰ï¼šå¯ä»¥è®¾ç½®ä¸º true ä»¥éšè— netifaces çš„å¯åŠ¨è­¦å‘Šï¼ˆä¾‹å¦‚åœ¨ Docker å®¹å™¨ä¸­ï¼‰ã€‚

```python
from nicegui import ui
from nicegui.elements import markdown

ui.label(f'Markdown content cache size is {markdown.prepare_content.cache_info().maxsize}')

ui.run()
```

![image-20231017204926010](images/var.jpg)

### åä¸‰ã€éƒ¨ç½²

#### 1ã€æœåŠ¡å™¨æ‰˜ç®¡ 

è¦åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²æ‚¨çš„ NiceGUI åº”ç”¨ç¨‹åºï¼Œæ‚¨éœ€è¦åœ¨äº‘åŸºç¡€è®¾æ–½ä¸Šæ‰§è¡Œæ‚¨çš„ main.pyï¼ˆæˆ–åŒ…å«æ‚¨çš„ ui.run(...) çš„ä»»ä½•åŒ…å«è¯¥å‘½ä»¤çš„æ–‡ä»¶ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥é€šè¿‡ pip å®‰è£… NiceGUI Python åŒ… [nicegui Â· PyPI](https://pypi.org/project/nicegui/)ï¼Œç„¶åä½¿ç”¨ systemd æˆ–ç±»ä¼¼çš„æœåŠ¡æ¥å¯åŠ¨ä¸»è„šæœ¬ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ ui.run å‘½ä»¤å°†ç«¯å£è®¾ç½®ä¸º 80ï¼ˆæˆ–è€…å¦‚æœæ‚¨æƒ³ä½¿ç”¨ HTTPSï¼Œåˆ™ä¸º 443ï¼‰ï¼Œä»¥ä¾¿ä»å¤–éƒ¨è½»æ¾è®¿é—®ã€‚

ä¸€ä¸ªæ–¹ä¾¿çš„æ›¿ä»£æ–¹æ³•æ˜¯ä½¿ç”¨æˆ‘ä»¬é¢„æ„å»ºçš„å¤šæ¶æ„ Docker é•œåƒ [zauberzeug/nicegui - Docker Image | Docker Hub](https://hub.docker.com/r/zauberzeug/nicegui)ï¼Œè¯¥é•œåƒåŒ…å«æ‰€æœ‰å¿…è¦çš„ä¾èµ–é¡¹ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œæ‚¨å¯ä»¥åœ¨å…¬å…±ç«¯å£ 80 ä¸Šå¯åŠ¨å½“å‰ç›®å½•ä¸­çš„ main.py è„šæœ¬ï¼š

```bash
docker run -it --restart always \
  -p 80:8080 \
  -e PUID=$(id -u) \
  -e PGID=$(id -g) \
  -v $(pwd)/:/app/ \
  zauberzeug/nicegui:latest
```

è¯¥æ¼”ç¤ºå‡å®š main.py åœ¨ ui.run å‘½ä»¤ä¸­ä½¿ç”¨é»˜è®¤çš„ç«¯å£ 8080ã€‚-d å‘Šè¯‰ Docker åœ¨åå°è¿è¡Œï¼Œ--restart always ä¼šç¡®ä¿å®¹å™¨åœ¨åº”ç”¨ç¨‹åºå´©æºƒæˆ–æœåŠ¡å™¨é‡æ–°å¯åŠ¨æ—¶é‡æ–°å¯åŠ¨ã€‚å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°†æ­¤é…ç½®å†™å…¥ Docker Compose æ–‡ä»¶ä¸­ï¼š

```yaml
app:
    image: zauberzeug/nicegui:latest
    restart: always
    ports:
        - 80:8080
    environment:
        - PUID=1000 # change this to your user id
        - PGID=1000 # change this to your group id
    volumes:
        - ./:/app/
```

Docker é•œåƒè¿˜å…·æœ‰å…¶ä»–å®ç”¨åŠŸèƒ½ï¼Œå¦‚é root ç”¨æˆ·æ‰§è¡Œå’Œä¿¡å·ä¼ é€’ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œå»ºè®®æŸ¥çœ‹æˆ‘ä»¬çš„ Docker ç¤ºä¾‹ã€‚[nicegui/examples/docker_image at main Â· zauberzeug/nicegui (github.com)](https://github.com/zauberzeug/nicegui/tree/main/examples/docker_image)

æ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨ FastAPI [About HTTPS - FastAPI (tiangolo.com)](https://fastapi.tiangolo.com/deployment/https/)  æä¾› SSL è¯ä¹¦ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬è¿˜å–œæ¬¢ä½¿ç”¨åå‘ä»£ç†ï¼Œå¦‚ Traefik [Traefik Proxy Documentation - Traefik](https://doc.traefik.io/traefik/)  æˆ– NGINX [Advanced Load Balancer, Web Server, & Reverse Proxy - NGINX](https://www.nginx.com/)ï¼Œæ¥å¤„ç†è¿™äº›è¯¦ç»†ä¿¡æ¯ã€‚å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬çš„å¼€å‘ docker-compose.yml ä½œä¸ºç¤ºä¾‹[nicegui/docker-compose.yml at main Â· zauberzeug/nicegui (github.com)](https://github.com/zauberzeug/nicegui/blob/main/docker-compose.yml)ã€‚

æ‚¨è¿˜å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬çš„ç¤ºä¾‹ [nicegui/examples/fastapi at main Â· zauberzeug/nicegui (github.com)](https://github.com/zauberzeug/nicegui/tree/main/examples/fastapi)ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰ FastAPI åº”ç”¨ç¨‹åºã€‚è¿™å°†ä½¿æ‚¨èƒ½å¤Ÿæ‰§è¡Œ FastAPI æ–‡æ¡£ [Deployment - FastAPI (tiangolo.com)](https://fastapi.tiangolo.com/deployment/) ä¸­æè¿°çš„éå¸¸çµæ´»çš„éƒ¨ç½²ã€‚è¯·æ³¨æ„ï¼Œè¦å…è®¸å¤šä¸ªå·¥ä½œè¿›ç¨‹ï¼Œéœ€è¦æ‰§è¡Œå…¶ä»–æ­¥éª¤ã€‚

#### 2ã€å®‰è£…åŒ…

NiceGUI åº”ç”¨ç¨‹åºè¿˜å¯ä»¥ä½¿ç”¨ PyInstaller [PyInstaller Manual â€” PyInstaller 6.1.0 documentation](https://pyinstaller.org/en/stable/) æ‰“åŒ…æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥å°†æ‚¨çš„åº”ç”¨ç¨‹åºåˆ†å‘ä¸ºä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•è®¡ç®—æœºä¸Šæ‰§è¡Œçš„å•ä¸ªæ–‡ä»¶ã€‚

åªéœ€ç¡®ä¿æ‚¨çš„ ui.run å‘½ä»¤æ²¡æœ‰ä½¿ç”¨ reload å‚æ•°ã€‚è¿è¡Œä¸‹é¢çš„ build.py å°†åœ¨ dist æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º myapp çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼š

main.py

```python
from nicegui import native_mode, ui

ui.label('Hello from PyInstaller')

ui.run(reload=False, port=native_mode.find_open_port())
```

build.py

```python
import os
import subprocess
from pathlib import Path
import nicegui

cmd = [
    'python',
    '-m', 'PyInstaller',
    'main.py', # your main file with ui.run()
    '--name', 'myapp', # name of your app
    '--onefile',
    #'--windowed', # prevent console appearing, only use with ui.run(native=True, ...)
    '--add-data', f'{Path(nicegui.__file__).parent}{os.pathsep}nicegui'
]
subprocess.call(cmd)
```

æ‰“åŒ…æç¤º

- æ„å»º PyInstaller åº”ç”¨ç¨‹åºæ—¶ï¼Œä¸»è¦è„šæœ¬å¯ä»¥ä½¿ç”¨æœ¬åœ°çª—å£ï¼ˆè€Œä¸æ˜¯æµè§ˆå™¨çª—å£ï¼‰ï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨ ui.run(reload=False, native=True)ã€‚native å‚æ•°å¯ä»¥æ˜¯ True æˆ– Falseï¼Œå…·ä½“å–å†³äºæ‚¨æ˜¯å¦æƒ³è¦æœ¬åœ°çª—å£æˆ–åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­å¯åŠ¨é¡µé¢ - ä¸¤è€…åœ¨ PyInstaller ç”Ÿæˆçš„åº”ç”¨ç¨‹åºä¸­éƒ½å¯ä»¥å·¥ä½œã€‚
- æŒ‡å®š --windowed ç»™ PyInstaller å°†é˜»æ­¢ç»ˆç«¯æ§åˆ¶å°å‡ºç°ã€‚ç„¶è€Œï¼Œåªæœ‰åœ¨æ‚¨çš„ ui.run å‘½ä»¤ä¸­è¿˜æŒ‡å®šäº† native=True é€‰é¡¹æ—¶ï¼Œæ‰åº”ä½¿ç”¨æ­¤é€‰é¡¹ã€‚å¦‚æœæ²¡æœ‰ç»ˆç«¯æ§åˆ¶å°ï¼Œç”¨æˆ·å°†æ— æ³•é€šè¿‡æŒ‰ Ctrl-C æ¥é€€å‡ºåº”ç”¨ç¨‹åºã€‚ä½¿ç”¨ native=True é€‰é¡¹æ—¶ï¼Œåº”ç”¨ç¨‹åºå°†åœ¨çª—å£å…³é—­æ—¶è‡ªåŠ¨å…³é—­ï¼Œè¿™æ˜¯é¢„æœŸçš„è¡Œä¸ºã€‚
- æŒ‡å®š --windowed ç»™ PyInstaller å°†åœ¨ Mac ä¸Šåˆ›å»ºä¸€ä¸ª .app æ–‡ä»¶ï¼Œå¯èƒ½æ›´æ–¹ä¾¿åˆ†å‘ã€‚å½“æ‚¨åŒå‡»è¯¥åº”ç”¨ç¨‹åºä»¥è¿è¡Œå®ƒæ—¶ï¼Œå®ƒå°†ä¸æ˜¾ç¤ºä»»ä½•æ§åˆ¶å°è¾“å‡ºã€‚æ‚¨ä¹Ÿå¯ä»¥ä»å‘½ä»¤è¡Œä¸­è¿è¡Œåº”ç”¨ç¨‹åº ./myapp.app/Contents/MacOS/myapp ä»¥æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºã€‚
- æŒ‡å®š --onefile ç»™ PyInstaller å°†åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚è™½ç„¶æ–¹ä¾¿åˆ†å‘ï¼Œä½†å¯åŠ¨é€Ÿåº¦ä¼šè¾ƒæ…¢ã€‚è¿™ä¸æ˜¯ NiceGUI çš„é—®é¢˜ï¼Œè€Œåªæ˜¯ PyInstaller å°†æ–‡ä»¶å‹ç¼©åˆ°å•ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨è¿è¡Œä¹‹å‰å°†æ‰€æœ‰æ–‡ä»¶è§£å‹åˆ°ä¸´æ—¶ç›®å½•çš„æ–¹å¼ã€‚æ‚¨å¯ä»¥é€šè¿‡ä» PyInstaller å‘½ä»¤ä¸­åˆ é™¤ --onefile å¹¶è‡ªå·±å‹ç¼©ç”Ÿæˆçš„ dist ç›®å½•æ¥ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼Œå¹¶å°†å…¶åˆ†å‘ç»™æ‚¨çš„æœ€ç»ˆç”¨æˆ·ã€‚æœ€ç»ˆç”¨æˆ·å¯ä»¥è§£å‹ä¸€æ¬¡ï¼Œç„¶åç«‹å³å¼€å§‹ï¼Œè€Œä¸éœ€è¦ç”±äº --onefile æ ‡å¿—çš„ä¸æ–­æ–‡ä»¶æ‰©å±•ã€‚
- ä¸åŒé€‰é¡¹çš„ç”¨æˆ·ä½“éªŒæ€»ç»“ï¼š

| PyInstaller            | ui.run(...)  | è§£é‡Š                                                         |
| ---------------------- | ------------ | ------------------------------------------------------------ |
| onefile                | native=False | ç”Ÿæˆä¸€ä¸ªå•ä¸€çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½äº dist/ ç›®å½•ä¸­ï¼Œä»¥æµè§ˆå™¨æ–¹å¼è¿è¡Œ |
| onefile                | native=True  | ç”Ÿæˆä¸€ä¸ªå•ä¸€çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½äº dist/ ç›®å½•ä¸­ï¼Œä»¥å¼¹å‡ºçª—å£æ–¹å¼è¿è¡Œ |
| onefile` and `windowed | native=True  | ç”Ÿæˆä¸€ä¸ªå•ä¸€çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½äº dist/ï¼ˆåœ¨Macä¸Šï¼Œä¼šç”Ÿæˆä¸€ä¸ªå¸¦å›¾æ ‡çš„dist/myapp.appæ–‡ä»¶ï¼‰ï¼Œè¿è¡Œåœ¨å¼¹å‡ºå¼çª—å£ä¸­ï¼Œä¸ä¼šæ˜¾ç¤ºæ§åˆ¶å° |
| onefile` and `windowed | native=False | é¿å…ï¼ˆæ— æ³•é€€å‡ºåº”ç”¨ç¨‹åºçš„æ–¹å¼ï¼‰                               |
| ä¸æŒ‡å®š                 |              | åˆ›å»º dist/myapp ç›®å½•ï¼Œå¯ä»¥æ‰‹åŠ¨å‹ç¼©å¹¶åˆ†å‘ï¼›ä½¿ç”¨ dist/myapp/myapp è¿è¡Œ |

- å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Python è™šæ‹Ÿç¯å¢ƒï¼Œè¯·ç¡®ä¿åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ä½¿ç”¨ `pip install pyinstaller`ï¼Œä»¥ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ PyInstaller ç‰ˆæœ¬ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°åº”ç”¨ç¨‹åºæ— æ³•æ­£å¸¸å·¥ä½œçš„é—®é¢˜ï¼Œå› ä¸ºé€‰æ‹©äº†é”™è¯¯ç‰ˆæœ¬çš„ PyInstallerã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ„å»ºè„šæœ¬ä½¿ç”¨ `python -m PyInstaller` æ¥è°ƒç”¨ PyInstallerï¼Œè€Œä¸æ˜¯ä»…ä»…ä½¿ç”¨ `pyinstaller`ã€‚

```bash
python -m venv venv
source venv/bin/activate
pip install nicegui
pip install pyinstaller
```

æ³¨æ„ï¼šå¦‚æœä½ é‡åˆ° "TypeError: a bytes-like object is required, not 'str'" é”™è¯¯ï¼Œè¯·å°è¯•åœ¨ä½ çš„ `main.py` æ–‡ä»¶çš„é¡¶éƒ¨æ·»åŠ ä»¥ä¸‹å‡ è¡Œä»£ç ï¼š

```python
import sys
sys.stdout = open('logs.txt', 'w')
```

See https://github.com/zauberzeug/nicegui/issues/681 for more information.

#### 3ã€NiceGUI On Air

ä½¿ç”¨ `ui.run(on_air=True)` å¯ä»¥åœ¨äº’è”ç½‘ä¸Šä¸å…¶ä»–äººå…±äº«ä½ çš„æœ¬åœ°åº”ç”¨ç¨‹åº ğŸ§ã€‚

è®¿é—® on-air URL æ—¶ï¼Œæ‰€æœ‰åº“ï¼ˆå¦‚ Vueã€Quasar ç­‰ï¼‰éƒ½ä»æˆ‘ä»¬çš„ CDN åŠ è½½ã€‚å› æ­¤ï¼Œåªéœ€ä¼ è¾“ä½ çš„æœ¬åœ°åº”ç”¨ç¨‹åºçš„åŸå§‹å†…å®¹å’Œäº‹ä»¶ã€‚è¿™ä½¿å¾—å³ä½¿ä½ çš„åº”ç”¨ç¨‹åºåªæœ‰è¾ƒå·®çš„äº’è”ç½‘è¿æ¥ï¼ˆä¾‹å¦‚ï¼Œç°åœºçš„ç§»åŠ¨æœºå™¨äººï¼‰ï¼Œå®ƒä»ç„¶å¯ä»¥è¿è¡Œå¾—éå¸¸å¿«é€Ÿã€‚

é€šè¿‡è®¾ç½® `on_air=True`ï¼Œä½ å°†è·å¾—ä¸€ä¸ªæœ‰æ•ˆæœŸä¸º1å°æ—¶çš„éšæœºURLã€‚å¦‚æœä½ åœ¨ [https://on-air.nicegui.io](https://on-air.nicegui.io/) æ³¨å†Œï¼Œä½ å°†è·å¾—ä¸€ä¸ªæ ‡è¯†ä½ çš„è®¾å¤‡çš„ä»¤ç‰Œï¼Œå¯ä»¥ç”¨æ¥è®¾ç½® `ui.run(on_air='<ä½ çš„ä»¤ç‰Œ>')`ï¼Œè¿™å°†ä¸ºä½ æä¾›ä¸€ä¸ªå›ºå®šçš„URLï¼Œå¹¶å…è®¸ä½ ä½¿ç”¨å¯†ç ä¿æŠ¤è¿œç¨‹è®¿é—®ã€‚

å½“å‰ On Air ä½œä¸ºæŠ€æœ¯é¢„è§ˆç‰ˆæœ¬å…è´¹ä½¿ç”¨ï¼ˆæš‚æ—¶ï¼‰ã€‚æˆ‘ä»¬å°†é€æ¸æé«˜ç¨³å®šæ€§ï¼Œå¼•å…¥ä»˜æ¬¾é€‰é¡¹ï¼Œå¹¶æ‰©å±•æœåŠ¡ä»¥æ”¯æŒå¤šè®¾å¤‡ç®¡ç†ã€è¿œç¨‹ç»ˆç«¯è®¿é—®ç­‰ã€‚è¯·åœ¨ GitHub [zauberzeug/nicegui Â· Discussions Â· GitHub](https://github.com/zauberzeug/nicegui/discussions)ã€Reddit [NiceGUI (reddit.com)](https://www.reddit.com/r/nicegui/) æˆ– Discord [Discord](https://discord.com/invite/TEpFeAaF4f) ä¸Šå‘Šè¯‰æˆ‘ä»¬æ‚¨çš„åé¦ˆã€‚

æ•°æ®éšç§ï¼šæˆ‘ä»¬éå¸¸é‡è§†æ‚¨çš„éšç§ã€‚NiceGUI On Air ä¸ä¼šè®°å½•æˆ–å­˜å‚¨ä¸­ç»§æ•°æ®çš„ä»»ä½•å†…å®¹ã€‚

